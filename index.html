<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>KMZ Secure</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <style>
        /* --- DESIGN SYSTEM KMZ --- */
        :root {
            --bg-color: #050505;
            --surface: #121212;
            --primary: #00e676; /* Verde Neon Elegante */
            --text-main: #e0e0e0;
            --text-muted: #757575;
            --danger: #cf6679;
        }

        * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }

        body {
            background-color: var(--bg-color);
            background-image: radial-gradient(circle at top, #1a1a1a, #000);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0; padding: 0;
            height: 100vh; overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* --- SPLASH SCREEN ANIMADO --- */
        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            transition: opacity 0.6s ease;
        }
        .glitch-wrapper { position: relative; font-size: 3rem; font-weight: 900; letter-spacing: 4px; color: var(--primary); }
        .loading-line { width: 150px; height: 2px; background: #333; margin-top: 20px; overflow: hidden; }
        .loading-line::after {
            content: ''; display: block; width: 50%; height: 100%; background: var(--primary);
            animation: slide 1.5s infinite linear;
        }

        /* --- TELAS --- */
        .screen {
            display: none; flex: 1; flex-direction: column;
            padding: 20px; height: 100%;
            animation: fadeIn 0.4s ease-out;
        }

        /* --- LOGIN --- */
        .login-container {
            display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100%;
        }
        .logo-small { font-weight: 900; color: var(--primary); font-size: 2rem; margin-bottom: 30px; letter-spacing: 2px; }
        
        /* --- INPUTS & BUTTONS --- */
        .input-group { width: 100%; max-width: 320px; margin-bottom: 15px; position: relative; }
        input, textarea {
            width: 100%; background: var(--surface); border: 1px solid #333;
            color: #fff; padding: 15px; border-radius: 12px; font-size: 16px;
            transition: border 0.3s;
        }
        input:focus, textarea:focus { border-color: var(--primary); }
        
        button {
            width: 100%; max-width: 320px; padding: 16px; border: none; border-radius: 12px;
            font-size: 16px; font-weight: 600; cursor: pointer;
            display: flex; justify-content: center; align-items: center; gap: 10px;
            transition: transform 0.1s, opacity 0.2s;
        }
        button:active { transform: scale(0.98); }
        
        .btn-primary { background: var(--primary); color: #000; }
        .btn-secondary { background: #333; color: #fff; }
        .btn-icon { width: 40px; padding: 10px; border-radius: 50%; background: transparent; color: var(--text-main); }

        /* --- APP HEADER --- */
        .app-header {
            display: flex; justify-content: space-between; align-items: center;
            padding-bottom: 15px; border-bottom: 1px solid #222; margin-bottom: 15px;
        }
        .status-badge { font-size: 0.75rem; background: #003300; color: var(--primary); padding: 4px 8px; border-radius: 4px; }

        /* --- TEXT AREAS --- */
        textarea { resize: none; font-family: 'Courier New', monospace; line-height: 1.4; }
        .area-label { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 5px; margin-left: 5px; }

        /* --- MODAL DE CRÉDITOS --- */
        #modal-info {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(5px);
            z-index: 5000; display: none;
            justify-content: center; align-items: center;
        }
        .modal-content {
            background: var(--surface); border: 1px solid #333; padding: 30px;
            border-radius: 16px; text-align: center; width: 85%; max-width: 300px;
        }
        .modal-content h3 { color: var(--primary); margin-top: 0; }
        .modal-content p { font-size: 0.9rem; color: #aaa; margin: 10px 0; }
        .modal-content a { color: var(--primary); text-decoration: none; }

        @keyframes slide { 0% { transform: translateX(-100%); } 100% { transform: translateX(200%); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="splash">
        <div class="glitch-wrapper">KMZ</div>
        <div style="color: #666; letter-spacing: 2px; font-size: 0.8rem; margin-top: 10px;">SYSTEMS</div>
        <div class="loading-line"></div>
    </div>

    <div id="login-screen" class="screen">
        <div class="login-container">
            <div class="logo-small">KMZ LOCK</div>
            
            <div class="input-group">
                <input type="text" id="user" placeholder="Usuário" autocomplete="off">
            </div>
            <div class="input-group">
                <input type="password" id="pass" placeholder="Senha" autocomplete="off">
            </div>
            
            <button class="btn-primary" onclick="attemptLogin()">
                <span class="material-symbols-outlined">lock_open</span> ACESSAR
            </button>
            <p id="error-msg" style="color: var(--danger); font-size: 0.9rem; margin-top: 15px; display: none;">Credenciais Inválidas</p>
        </div>
        <div style="text-align: center; color: #444; font-size: 0.7rem; margin-top: auto;">Secure Environment v4.0</div>
    </div>

    <div id="app-screen" class="screen">
        <div class="app-header">
            <div>
                <span style="font-weight: bold; letter-spacing: 1px;">KMZ</span> 
                <span class="status-badge">SECURE</span>
            </div>
            <button class="btn-icon" onclick="toggleModal('modal-info')">
                <span class="material-symbols-outlined">settings</span>
            </button>
        </div>

        <div style="display: flex; flex-direction: column; flex: 1; gap: 10px;">
            <div>
                <div class="area-label">MENSAGEM ORIGINAL</div>
                <textarea id="plainText" style="height: 100px;" placeholder="Digite aqui..."></textarea>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button class="btn-primary" onclick="encriptar()">
                    <span class="material-symbols-outlined">lock</span> BLOQUEAR
                </button>
                <button class="btn-secondary" onclick="forceCopy('cipherText')" style="width: 80px;">
                    <span class="material-symbols-outlined">content_copy</span>
                </button>
            </div>

            <div style="margin-top: 10px;">
                <div class="area-label">CÓDIGO CRIPTOGRAFADO</div>
                <textarea id="cipherText" style="height: 100px; color: var(--primary);" placeholder="Resultado aparece aqui..."></textarea>
            </div>

            <div style="display: flex; gap: 10px;">
                <button class="btn-primary" onclick="decriptar()" style="background-color: var(--surface); border: 1px solid var(--primary); color: var(--primary);">
                    <span class="material-symbols-outlined">lock_open</span> LIBERAR
                </button>
                <button class="btn-secondary" onclick="forceCopy('plainText')" style="width: 80px;">
                    <span class="material-symbols-outlined">content_copy</span>
                </button>
            </div>
        </div>
    </div>

    <div id="modal-info">
        <div class="modal-content">
            <h3>KMZ INTERPRISE</h3>
            <p>Desenvolvimento e Segurança</p>
            <div style="width: 50px; height: 2px; background: #333; margin: 15px auto;"></div>
            <p><strong>CEO/Dev:</strong><br>Kauã Mazur dos Reis</p>
            <p><strong>Suporte:</strong><br><a href="mailto:kmzsuportt1@gmail.com">kmzsuportt1@gmail.com</a></p>
            <p style="font-size: 0.7rem; color: #555; margin-top: 20px;">© 2026 Todos os direitos reservados</p>
            
            <button class="btn-secondary" onclick="logout()" style="margin-top: 20px; background: var(--danger); border: none;">
                SAIR DO APP
            </button>
            <button class="btn-icon" onclick="toggleModal('modal-info')" style="position: absolute; top: 10px; right: 10px;">
                <span class="material-symbols-outlined">close</span>
            </button>
        </div>
    </div>

    <script>
        // --- CONFIGURAÇÃO ---
        const CRED = { u: "Admin", p: "028929" };
        const STORAGE_KEY = "kmz_auth_token_v1";

        // --- SISTEMA DE INICIALIZAÇÃO ---
        window.onload = () => {
            // Verifica se já está logado
            const isLogged = localStorage.getItem(STORAGE_KEY) === "true";
            
            setTimeout(() => {
                document.getElementById('splash').style.opacity = 0;
                setTimeout(() => {
                    document.getElementById('splash').style.display = 'none';
                    if (isLogged) {
                        showScreen('app-screen');
                    } else {
                        showScreen('login-screen');
                    }
                }, 500);
            }, 2000); // 2 segundos de splash KMZ
        };

        function showScreen(id) {
            document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
            document.getElementById(id).style.display = 'flex';
        }

        // --- AUTENTICAÇÃO ---
        function attemptLogin() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;

            if (u === CRED.u && p === CRED.p) {
                // SALVA O LOGIN
                localStorage.setItem(STORAGE_KEY, "true");
                showScreen('app-screen');
            } else {
                const err = document.getElementById('error-msg');
                err.style.display = 'block';
                // Efeito de tremer
                const box = document.querySelector('.login-container');
                box.style.transform = "translateX(10px)";
                setTimeout(()=> box.style.transform = "translateX(0)", 100);
            }
        }

        function logout() {
            localStorage.removeItem(STORAGE_KEY);
            document.getElementById('user').value = "";
            document.getElementById('pass').value = "";
            document.getElementById('error-msg').style.display = 'none';
            toggleModal('modal-info'); // fecha modal
            showScreen('login-screen');
        }

        function toggleModal(id) {
            const el = document.getElementById(id);
            el.style.display = (el.style.display === 'flex') ? 'none' : 'flex';
        }

        // --- CRIPTOGRAFIA ---
        const ALPHABET = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        const CIPHER   = "∆ΩθμπΣΦΨωζξλβγα¬®©™£¢§¶¥€!@#$abcdefghijklmnopqrstuvwxyz123456789%&*"; 

        function encriptar() {
            let txt = document.getElementById('plainText').value;
            if(!txt) return;
            try {
                let b64 = btoa(unescape(encodeURIComponent(txt)));
                let res = "";
                for(let c of b64) {
                    let i = ALPHABET.indexOf(c);
                    res += (i !== -1) ? CIPHER[i] : c;
                }
                document.getElementById('cipherText').value = res;
                document.getElementById('plainText').value = "";
            } catch(e) {}
        }

        function decriptar() {
            let txt = document.getElementById('cipherText').value;
            if(!txt) return;
            try {
                let b64 = "";
                for(let c of txt) {
                    let i = CIPHER.indexOf(c);
                    b64 += (i !== -1) ? ALPHABET[i] : c;
                }
                let res = decodeURIComponent(escape(atob(b64)));
                document.getElementById('plainText').value = res;
                document.getElementById('cipherText').value = "";
            } catch(e) { alert("Código Inválido"); }
        }

        // --- SISTEMA DE COPIAR ROBUSTO (PARA ANDROID ANTIGO E NOVO) ---
        function forceCopy(elementId) {
            let el = document.getElementById(elementId);
            
            // 1. Tenta API Moderna
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(el.value).then(() => {
                    alert("Copiado!");
                }).catch(() => {
                    fallbackCopy(el);
                });
            } else {
                // 2. Fallback para WebView/Cordova
                fallbackCopy(el);
            }
        }

        function fallbackCopy(el) {
            el.select();
            el.setSelectionRange(0, 99999); // Mobile
            try {
                document.execCommand('copy');
                // Pequeno feedback visual no botão seria legal, mas alert serve
                alert("Copiado com Sucesso!"); 
            } catch (err) {
                alert("Erro ao copiar. Selecione e copie manualmente.");
            }
        }
    </script>
</body>
</html>
